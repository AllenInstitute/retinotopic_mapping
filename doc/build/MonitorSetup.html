

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>retinotopic_mapping.MonitorSetup &mdash; retinotopic_mapping 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="retinotopic_mapping 1.0.0 documentation" href="index.html"/>
        <link rel="up" title="API Documentation" href="api.html"/>
        <link rel="prev" title="API Documentation" href="api.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> retinotopic_mapping
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">retinotopic_mapping.MonitorSetup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#monitor">Monitor</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#indicator">Indicator</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="StimulusRoutines.html">retinotopic_mapping.StimulusRoutines</a></li>
<li class="toctree-l2"><a class="reference internal" href="DisplayStimulus.html">retinotopic_mapping.DisplayStimulus</a></li>
<li class="toctree-l2"><a class="reference internal" href="DisplayLogAnalysis.html">retinotopic_mapping.DisplayLogAnalysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html#indices-and-tables">Indices and tables</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">retinotopic_mapping</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="api.html">API Documentation</a> &raquo;</li>
        
      <li>retinotopic_mapping.MonitorSetup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/MonitorSetup.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="retinotopic-mapping-monitorsetup">
<h1>retinotopic_mapping.MonitorSetup<a class="headerlink" href="#retinotopic-mapping-monitorsetup" title="Permalink to this headline">¶</a></h1>
<p>Used to store the display monitor and particular geometry used within a given
experimental setup. The <cite>Monitor</cite> class holds references to the sizing of the
monitor that is used to display stimulus routines and contains the necessary
geometrical description of where the subject’s eye is placed with respect to the
display monitor. The <cite>Indicator</cite> class, on the other hand, is generally used in
order to gain precise temporal information of the stimuli display. Basically a
indicator is just a small square shows up at one corner of the display screen.
It changes color during visual stimuli display. By covering it with a photodiode
with high temporal precision and syncing the photodiode signal into data
acquisition system, the experimenter will get the ground truth of display
timestamps. Ideally the flashes of an indicator will be synchronized with the
onsets of stimuli.</p>
<p>The module will most definitely be used in conjunction with the <code class="xref py py-mod docutils literal notranslate"><span class="pre">DisplayStimulus</span></code>
and <code class="xref py py-mod docutils literal notranslate"><span class="pre">StimulusRoutines</span></code> modules.</p>
<div class="section" id="monitor">
<h2>Monitor<a class="headerlink" href="#monitor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="retinotopic_mapping.MonitorSetup.Monitor">
<em class="property">class </em><code class="descclassname">retinotopic_mapping.MonitorSetup.</code><code class="descname">Monitor</code><span class="sig-paren">(</span><em>resolution</em>, <em>dis</em>, <em>mon_width_cm</em>, <em>mon_height_cm</em>, <em>C2T_cm=None</em>, <em>C2A_cm=None</em>, <em>center_coordinates=(0.0</em>, <em>60.0)</em>, <em>visual_field='right'</em>, <em>deg_coord_x=None</em>, <em>deg_coord_y=None</em>, <em>name='testMonitor'</em>, <em>gamma=None</em>, <em>gamma_grid=None</em>, <em>luminance=None</em>, <em>downsample_rate=10</em>, <em>refresh_rate=60.0</em><span class="sig-paren">)</span><a class="headerlink" href="#retinotopic_mapping.MonitorSetup.Monitor" title="Permalink to this definition">¶</a></dt>
<dd><p>monitor object created by Jun, has the method “remap” to generate the
spherical corrected coordinates in degrees</p>
<p>This object contains the relevant data for the monitor used within a
given experimental setup. When initialized, the rectangular coordinates
of the pixels on the monitor are computed and stored as <cite>lin_coord_x</cite>,
<cite>lin_coord_y</cite>. The rectangular coordinates are then transformed and
warped by calling the <cite>remap</cite> method to populate the <cite>deg_coord_x</cite> and
<cite>deg_coord_y</cite> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>resolution</strong> : tuple</p>
<blockquote>
<div><p>value of the monitor resolution</p>
</div></blockquote>
<p><strong>dis</strong> : float</p>
<blockquote>
<div><p>distance from eyeball to monitor (in cm)</p>
</div></blockquote>
<p><strong>mon_width_cm</strong> : float</p>
<blockquote>
<div><p>width of monitor (in cm)</p>
</div></blockquote>
<p><strong>mon_height_cm</strong> : float</p>
<blockquote>
<div><p>height of monitor (in cm)</p>
</div></blockquote>
<p><strong>C2T_cm</strong> : float</p>
<blockquote>
<div><p>distance from gaze center to monitor top</p>
</div></blockquote>
<p><strong>C2A_cm</strong> : float</p>
<blockquote>
<div><p>distance from gaze center to anterior edge of the monitor</p>
</div></blockquote>
<p><strong>center_coordinates</strong> : tuple of two floats</p>
<blockquote>
<div><p>(altitude, azimuth), in degrees. the coordinates of the projecting point
from the eye ball to the monitor. This allows to place the display monitor
in any arbitrary position.</p>
</div></blockquote>
<p><strong>visual_field</strong> : str from {‘right’,’left’}, optional</p>
<blockquote>
<div><p>the eye that is facing the monitor, defaults to ‘right’</p>
</div></blockquote>
<p><strong>deg_coord_x</strong> : ndarray, optional</p>
<blockquote>
<div><p>array of warped x pixel coordinates, defaults to <cite>None</cite></p>
</div></blockquote>
<p><strong>deg_coord_y</strong> : ndarray, optional</p>
<blockquote>
<div><p>array of warped y pixel coordinates, defaults to <cite>None</cite></p>
</div></blockquote>
<p><strong>name</strong> : str, optional</p>
<blockquote>
<div><p>name of the monitor, defaults to <cite>testMonitor</cite></p>
</div></blockquote>
<p><strong>gamma</strong> : optional</p>
<blockquote>
<div><p>for gamma correction, defaults to <cite>None</cite></p>
</div></blockquote>
<p><strong>gamma_grid</strong> : optional</p>
<blockquote>
<div><p>for gamme correction, defaults to <cite>None</cite></p>
</div></blockquote>
<p><strong>luminance</strong> : optional</p>
<blockquote>
<div><p>monitor luminance, defaults to <cite>None</cite></p>
</div></blockquote>
<p><strong>downsample_rate</strong> : int, optional</p>
<blockquote>
<div><p>downsample rate of monitor pixels, defaults to 10</p>
</div></blockquote>
<p><strong>refresh_rate</strong> : float, optional</p>
<blockquote class="last">
<div><p>the refresh rate of the monitor in Hz, defaults to 60</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#retinotopic_mapping.MonitorSetup.Monitor.generate_lookup_table" title="retinotopic_mapping.MonitorSetup.Monitor.generate_lookup_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generate_lookup_table</span></code></a>()</td>
<td>generate lookup talbe between degree corrdinates and linear corrdinates return two matrix: lookupI: i index in linear matrix to this pixel after warping lookupJ: j index in linear matrix to this pixel after warping</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_map</span></code>()</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#retinotopic_mapping.MonitorSetup.Monitor.remap" title="retinotopic_mapping.MonitorSetup.Monitor.remap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remap</span></code></a>()</td>
<td>warp the linear pixel coordinates to a spherical corrected representation.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_downsample_rate</span></code>(downsample_rate)</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_gamma</span></code>(gamma,&nbsp;gamma_grid)</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_luminance</span></code>(luminance)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#retinotopic_mapping.MonitorSetup.Monitor.warp_images" title="retinotopic_mapping.MonitorSetup.Monitor.warp_images"><code class="xref py py-obj docutils literal notranslate"><span class="pre">warp_images</span></code></a>(imgs,&nbsp;center_coor[,&nbsp;…])</td>
<td>warp a image stack into visual degree coordinate system</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="retinotopic_mapping.MonitorSetup.Monitor.generate_lookup_table">
<code class="descname">generate_lookup_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#retinotopic_mapping.MonitorSetup.Monitor.generate_lookup_table" title="Permalink to this definition">¶</a></dt>
<dd><p>generate lookup talbe between degree corrdinates and linear corrdinates
return two matrix:
lookupI: i index in linear matrix to this pixel after warping
lookupJ: j index in linear matrix to this pixel after warping</p>
</dd></dl>

<dl class="method">
<dt id="retinotopic_mapping.MonitorSetup.Monitor.remap">
<code class="descname">remap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#retinotopic_mapping.MonitorSetup.Monitor.remap" title="Permalink to this definition">¶</a></dt>
<dd><p>warp the linear pixel coordinates to a spherical corrected representation.</p>
<p>Function is called when the monitor object is initialized and populate
the <cite>deg_coord_x</cite> and <cite>deg_coord_y</cite> attributes.</p>
</dd></dl>

<dl class="method">
<dt id="retinotopic_mapping.MonitorSetup.Monitor.warp_images">
<code class="descname">warp_images</code><span class="sig-paren">(</span><em>imgs</em>, <em>center_coor</em>, <em>deg_per_pixel=0.1</em>, <em>is_luminance_correction=True</em><span class="sig-paren">)</span><a class="headerlink" href="#retinotopic_mapping.MonitorSetup.Monitor.warp_images" title="Permalink to this definition">¶</a></dt>
<dd><p>warp a image stack into visual degree coordinate system</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>imgs</strong> : ndarray</p>
<blockquote>
<div><p>should be 2d or 3d, if 3d, axis will be considered as frame x rows x width</p>
</div></blockquote>
<p><strong>center_coor</strong> : list or tuple of two floats</p>
<blockquote>
<div><p>the visual degree coordinates of the center of the image (altitude, azimuth)</p>
</div></blockquote>
<p><strong>deg_per_pixel</strong> : float or list/tuple of two floats</p>
<blockquote>
<div><p>size of original pixel in visual degrees, (altitude, azimuth), if float, assume
sizes in both dimension are the same</p>
</div></blockquote>
<p><strong>is_luminance_correction</strong> : bool</p>
<blockquote>
<div><p>if True, wrapped images will have mean intensity equal 0, and values will be
scaled up to reach minimum equal -1. or maximum equal 1.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>imgs_wrapped</strong> : 3d array, np.float32</p>
<blockquote>
<div><p>wrapped images, each frame should have exact same size of down sampled monitor
resolution. the region on the monitor not covered by the image will have value
of np.nan. value range [-1., 1.]</p>
</div></blockquote>
<p><strong>coord_alt_wrapped</strong> : 2d array, np.float32</p>
<blockquote>
<div><p>the altitude coordinates of all pixels in the wrapped images in visual degrees.
should have the same shape as each frame in ‘imgs_wrapped’.</p>
</div></blockquote>
<p><strong>coord_azi_wrapped</strong> : 2d array, np.float32</p>
<blockquote>
<div><p>the azimuth coordinates of all pixels in the wrapped images in visual degrees.
should have the same shape as each frame in ‘imgs_wrapped’.</p>
</div></blockquote>
<p><strong>imgs_dewrapped</strong> : 3d array, dtype same as imgs</p>
<blockquote>
<div><p>unwrapped images, same dimension as input image stack. the region of original
image that was not got displayed (outside of the monitor) will have value of
np.nan. value range [-1., 1.]</p>
</div></blockquote>
<p><strong>coord_alt_dewrapped</strong> : 2d array, np.float32</p>
<blockquote>
<div><p>the altitude coordinates of all pixels in the dewrapped images in visual degrees.
should have the same shape as each frame in ‘imgs_dewrapped’.</p>
</div></blockquote>
<p><strong>coord_azi_dewrapped</strong> : 2d array, np.float32</p>
<blockquote class="last">
<div><p>the azimuth coordinates of all pixels in the dewrapped images in visual degrees.
should have the same shape as each frame in ‘imgs_dewrapped’.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="indicator">
<h2>Indicator<a class="headerlink" href="#indicator" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="retinotopic_mapping.MonitorSetup.Indicator">
<em class="property">class </em><code class="descclassname">retinotopic_mapping.MonitorSetup.</code><code class="descname">Indicator</code><span class="sig-paren">(</span><em>monitor</em>, <em>width_cm=3.0</em>, <em>height_cm=3.0</em>, <em>position='northeast'</em>, <em>is_sync=True</em>, <em>freq=2.0</em><span class="sig-paren">)</span><a class="headerlink" href="#retinotopic_mapping.MonitorSetup.Indicator" title="Permalink to this definition">¶</a></dt>
<dd><p>flashing indicator for photodiode</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>monitor</strong> : monitor object</p>
<blockquote>
<div><p>The monitor used within the experimental setup</p>
</div></blockquote>
<p><strong>width_cm</strong> : float, optional</p>
<blockquote>
<div><p>width of the size of the indicator in cm, defaults to <cite>3.</cite></p>
</div></blockquote>
<p><strong>height_cm</strong> : float, optional</p>
<blockquote>
<div><p>height of the size of the indicator in cm, defaults to <cite>3.</cite></p>
</div></blockquote>
<p><strong>position</strong> : str from {‘northeast’,’northwest’,’southwest’,’southeast’}</p>
<blockquote>
<div><p>the placement of the indicator, defaults to ‘northeast’</p>
</div></blockquote>
<p><strong>is_sync</strong> : bool, optional</p>
<blockquote>
<div><p>determines whether the indicator is synchronized with the stimulus,
defaults to True.</p>
</div></blockquote>
<p><strong>freq</strong> : float, optional</p>
<blockquote class="last">
<div><p>frequency of photodiode, defaults to <cite>2.</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_center</span></code>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#retinotopic_mapping.MonitorSetup.Indicator.get_frames" title="retinotopic_mapping.MonitorSetup.Indicator.get_frames"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_frames</span></code></a>()</td>
<td>if not synchronized with stimulation, get frame numbers of each update of indicator</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_size_pixel</span></code>()</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="retinotopic_mapping.MonitorSetup.Indicator.get_frames">
<code class="descname">get_frames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#retinotopic_mapping.MonitorSetup.Indicator.get_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>if not synchronized with stimulation, get frame numbers of each update
of indicator</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="api.html" class="btn btn-neutral" title="API Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Allen Institute for Brain Science.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>